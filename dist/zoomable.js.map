{"version":3,"sources":["zoomable.js"],"names":[],"mappings":"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","file":"zoomable.js","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  global.Zoomable = factory()\n}(this, function () { 'use strict';\n\n  const backgroundStyle = {\n    width: '100%',\n    height: '100%',\n    top: 0,\n    left: 0,\n    zIndex: 998,\n    position: 'fixed',\n    pointerEvents: 'none',\n    cursor: 'zoom-out',\n    transition: 'background 0.2s ease'\n  };\n\n  const containerStyle = {\n    position: 'absolute',\n    zIndex: 999,\n    cursor: 'zoom-out',\n    transition: 'transform 0.2s ease',\n    transformOrigin: 'center center'\n  };\n\n  const imageStyle = {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n    maxWidth: '100%',\n    maxHeight: '100%',\n    display: 'block',\n    transition: 'all 0.2s ease'\n  };\n\n  class Zoomable {\n\n    constructor (...elements) {\n      // If any of the arguments are arrays, let's flatten those\n      this.elements = this.flatten(elements);\n\n      // Convert any HTMLCollection types to arrays\n      this.elements = Array.prototype.slice.call(this.elements);\n\n      // Attach the handler to each element\n      this.elements.map((element) => this.attach(element));\n\n      // Create and style the background div\n      this.background = document.createElement('div');\n      this.setStyle(this.background, backgroundStyle);\n      document.body.appendChild(this.background);\n\n      // Create the container\n      this.container = document.createElement('div');\n      this.setStyle(this.container, containerStyle);\n      document.body.appendChild(this.container);\n\n      // Create the image replacement\n      this.image = document.createElement('img');\n      this.setStyle(this.image, imageStyle);\n      this.container.appendChild(this.image);\n    }\n\n    attach (element) {\n      element.addEventListener('click', this.zoom.bind(this), false);\n      element.style.cursor = 'zoom-in';\n    }\n\n    detach (element) {\n      element.removeEventListener('click', this.zoom.bind(this), false);\n    }\n\n    zoom (event) {\n      this.background.addEventListener('click', this.shrink.bind(this), false);\n      this.container.addEventListener('click', this.shrink.bind(this), false);\n\n      this.container.style.display = 'block';\n      this.container.style.width = `${event.target.offsetWidth}px`;\n      this.container.style.height = `${event.target.offsetHeight}px`;\n\n      let targetPosition = event.target.getBoundingClientRect();\n      let bodyPosition = document.body.getBoundingClientRect();\n\n      this.background.style.pointerEvents = 'auto';\n      this.container.style.pointerEvents = 'auto';\n\n      this.container.style.left = `${targetPosition.left}px`;\n      this.container.style.top = `${targetPosition.top - bodyPosition.top}px`;\n\n      let scaleFactor = window.innerWidth < 900 ? 1.0 : 0.8;\n      let containerPosition = this.container.getBoundingClientRect();\n\n      let offset = {\n        x: (window.innerWidth / 2) - (containerPosition.left + (this.container.offsetWidth / 2)),\n        y: (window.innerHeight / 2) - (containerPosition.top + (this.container.offsetHeight / 2)),\n        s: Math.min((window.innerWidth * scaleFactor) / event.target.offsetWidth,\n                    (window.innerHeight * 0.8) / event.target.offsetHeight)\n      };\n\n      console.log(offset);\n\n      this.image.src = event.target.src;\n      this.image.style.transform = `scale(${offset.s})`;\n      this.container.style.transform = `translate3d(${offset.x}px, ${offset.y}px, 0)`;\n    }\n\n    shrink () {\n      this.container.style.transform = 'translate3d(0, 0, 0)';\n      this.container.style.pointerEvents = 'none';\n      this.background.style.pointerEvents = 'none';\n      this.image.style.transform = 'scale(1)';\n\n      setTimeout(() => {\n        this.container.style.display = 'none';\n      }, 200);\n    }\n\n    flatten (ary) {\n      return ary.reduce((acc, el) => acc.concat(el));\n    }\n\n    setStyle (elm, style) {\n      for (var def in style) {\n        elm.style[def] = style[def];\n      }\n    }\n\n  }\n\n  return Zoomable;\n\n}));\n"],"sourceRoot":"/source/"}