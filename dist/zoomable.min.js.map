{"version":3,"sources":["zoomable.min.js","/source/zoomable.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","global","factory","exports","module","define","amd","Zoomable","this","backgroundStyle","width","height","top","left","zIndex","position","pointerEvents","cursor","transition","containerStyle","transformOrigin","imageStyle","bottom","right","maxWidth","maxHeight","display","_this","_len","arguments","elements","Array","_key","flatten","slice","call","map","element","attach","background","document","createElement","setStyle","body","appendChild","container","image","value","addEventListener","zoom","bind","style","removeEventListener","event","shrink","offsetWidth","offsetHeight","targetPosition","getBoundingClientRect","bodyPosition","scaleFactor","window","innerWidth","containerPosition","offset","x","y","innerHeight","s","Math","min","console","log","src","transform","_this2","setTimeout","ary","reduce","acc","el","concat","elm","def"],"mappings":"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","file":"zoomable.min.js","sourcesContent":[null,"(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  global.Zoomable = factory()\n}(this, function () { 'use strict';\n\n  const backgroundStyle = {\n    width: '100%',\n    height: '100%',\n    top: 0,\n    left: 0,\n    zIndex: 998,\n    position: 'fixed',\n    pointerEvents: 'none',\n    cursor: 'zoom-out',\n    transition: 'background 0.2s ease'\n  };\n\n  const containerStyle = {\n    position: 'absolute',\n    zIndex: 999,\n    cursor: 'zoom-out',\n    transition: 'transform 0.2s ease',\n    transformOrigin: 'center center'\n  };\n\n  const imageStyle = {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n    maxWidth: '100%',\n    maxHeight: '100%',\n    display: 'block',\n    transition: 'all 0.2s ease'\n  };\n\n  class Zoomable {\n\n    constructor (...elements) {\n      // If any of the arguments are arrays, let's flatten those\n      this.elements = this.flatten(elements);\n\n      // Convert any HTMLCollection types to arrays\n      this.elements = Array.prototype.slice.call(this.elements);\n\n      // Attach the handler to each element\n      this.elements.map((element) => this.attach(element));\n\n      // Create and style the background div\n      this.background = document.createElement('div');\n      this.setStyle(this.background, backgroundStyle);\n      document.body.appendChild(this.background);\n\n      // Create the container\n      this.container = document.createElement('div');\n      this.setStyle(this.container, containerStyle);\n      document.body.appendChild(this.container);\n\n      // Create the image replacement\n      this.image = document.createElement('img');\n      this.setStyle(this.image, imageStyle);\n      this.container.appendChild(this.image);\n    }\n\n    attach (element) {\n      element.addEventListener('click', this.zoom.bind(this), false);\n      element.style.cursor = 'zoom-in';\n    }\n\n    detach (element) {\n      element.removeEventListener('click', this.zoom.bind(this), false);\n    }\n\n    zoom (event) {\n      this.background.addEventListener('click', this.shrink.bind(this), false);\n      this.container.addEventListener('click', this.shrink.bind(this), false);\n\n      this.container.style.display = 'block';\n      this.container.style.width = `${event.target.offsetWidth}px`;\n      this.container.style.height = `${event.target.offsetHeight}px`;\n\n      let targetPosition = event.target.getBoundingClientRect();\n      let bodyPosition = document.body.getBoundingClientRect();\n\n      this.background.style.pointerEvents = 'auto';\n      this.container.style.pointerEvents = 'auto';\n\n      this.container.style.left = `${targetPosition.left}px`;\n      this.container.style.top = `${targetPosition.top - bodyPosition.top}px`;\n\n      let scaleFactor = window.innerWidth < 900 ? 1.0 : 0.8;\n      let containerPosition = this.container.getBoundingClientRect();\n\n      let offset = {\n        x: (window.innerWidth / 2) - (containerPosition.left + (this.container.offsetWidth / 2)),\n        y: (window.innerHeight / 2) - (containerPosition.top + (this.container.offsetHeight / 2)),\n        s: Math.min((window.innerWidth * scaleFactor) / event.target.offsetWidth,\n                    (window.innerHeight * 0.8) / event.target.offsetHeight)\n      };\n\n      console.log(offset);\n\n      this.image.src = event.target.src;\n      this.image.style.transform = `scale(${offset.s})`;\n      this.container.style.transform = `translate3d(${offset.x}px, ${offset.y}px, 0)`;\n    }\n\n    shrink () {\n      this.container.style.transform = 'translate3d(0, 0, 0)';\n      this.container.style.pointerEvents = 'none';\n      this.background.style.pointerEvents = 'none';\n      this.image.style.transform = 'scale(1)';\n\n      setTimeout(() => {\n        this.container.style.display = 'none';\n      }, 200);\n    }\n\n    flatten (ary) {\n      return ary.reduce((acc, el) => acc.concat(el));\n    }\n\n    setStyle (elm, style) {\n      for (var def in style) {\n        elm.style[def] = style[def];\n      }\n    }\n\n  }\n\n  return Zoomable;\n\n}));\n"],"sourceRoot":"/source/"}